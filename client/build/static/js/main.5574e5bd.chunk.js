(this["webpackJsonpprop-manager"]=this["webpackJsonpprop-manager"]||[]).push([[0],{205:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(67),i=n.n(c),s=(n(205),n(390)),o=n(182),l=Object(o.a)({typography:{fontFamily:'"Roboto", "Open Sans", "sans-serif" ',fontSize:12,button:{textTransform:"none",fontWeight:700}},palette:{primary:{main:"#0a2d26",light:"#34564e",dark:"#000400",contrastText:"#fff"},secondary:{main:"#db9769",light:"#ffc898",dark:"#a7693d",contrastText:"#000"}},shape:{borderRadius:3}}),u=n(17),d=n(28),j=n(393),b=n(391),m=n(392),h=n(114),p=n(394),x=n(14),f=n.n(x),O=n(20),g=n(6),y="https://hatchway-team-beagle.herokuapp.com";function v(e,t){return _.apply(this,arguments)}function _(){return(_=Object(O.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n}),credentials:"include"},e.next=4,fetch("".concat(y,"/auth/login"),a).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return S.apply(this,arguments)}function S(){return(S=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/auth/user"),t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return(k=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/auth/logout"),t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=n(0),I=Object(a.createContext)({loggedInUser:void 0,userProfile:void 0,updateLoginContext:function(){return null},updateProfileContext:function(){return null},logout:function(){return null},setLoggedInUser:function(){return null}}),L=function(e){var t=e.children,n=Object(a.useState)(),r=Object(g.a)(n,2),c=r[0],i=r[1],s=Object(d.g)(),o=Object(a.useCallback)((function(e){i(e.user)}),[]),l=Object(a.useCallback)(Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w().then((function(){i(null),console.log("LOGOUT"),s.push("/login")})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),[s]);return Object(a.useEffect)((function(){var e=function(){var e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C().then((function(e){e.success?o(e.success,!1):i(null)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[o,s]),Object(P.jsx)(I.Provider,{value:{loggedInUser:c,updateLoginContext:o,logout:l,setLoggedInUser:i},children:t})};function F(){return Object(a.useContext)(I)}var U={owner:"owner",tenant:"tenant",maintenance:"maintenance",admin:"admin"},q={my:1,mx:1.5,"&.selected":{color:l.palette.secondary.main}};function E(){var e,t=F(),n=t.loggedInUser,a=t.logout;return e=n&&n.account_type===U.owner?[{label:"Dashboard",path:"/dashboard"},{label:"Properties",path:"/properties"},{label:"Tenants",path:"/tenants"},{label:"Maintenances",path:"/maintenances"},{label:"Invoices",path:"/invoices"},{label:"Leases",path:"/leases"}]:[{label:"Dashboard",path:"/dashboard"},{label:"Maintenances",path:"/maintenances"},{label:"Invoices",path:"/invoices"},{label:"Leases",path:"/leases"}],Object(P.jsx)(b.a,{position:"static",color:"default",elevation:0,sx:{borderBottom:function(e){return"1px solid ".concat(e.palette.divider)}},children:Object(P.jsxs)(m.a,{sx:{flexWrap:"wrap"},children:[Object(P.jsx)(h.a,{variant:"h4",color:"secondary",noWrap:!0,sx:{flexGrow:1},children:"tuk\u2022den"}),Object(P.jsx)("nav",{children:e.map((function(e){return Object(P.jsx)(j.a,{component:u.c,variant:"button",color:"textPrimary",to:e.path,activeClassName:"selected",sx:q,children:e.label},e.label)}))}),n&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(j.a,{component:u.c,to:"/profile",underline:"none",children:"".concat(n.first_name," ").concat(n.last_name)}),Object(P.jsx)(p.a,{onClick:function(){return a()},variant:"outlined",sx:{my:1,mx:1.5},children:"Logout"})]}),!n&&Object(P.jsx)(p.a,{component:u.c,to:"/login",variant:"outlined",sx:{my:1,mx:1.5},children:"Login"})]})})}var T=n(26),K=["image_url"],D=["image_url","units"];function N(){return A.apply(this,arguments)}function A(){return(A=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/property"),t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/property/").concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(O.a)(f.a.mark((function e(t){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,a=t.image_url,r=Object(T.a)(t,K),n.append("file",a),n.append("data",JSON.stringify(r)),c={method:"POST",credentials:"include",body:n},e.next=7,fetch("".concat(y,"/property/new"),c).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(O.a)(f.a.mark((function e(t,n){var a,r,c,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,console.log(n),r=n.image_url,c=n.units,i=Object(T.a)(n,D),a.append("file",r),i.newUnits=[],i.inputUnits=[],c.forEach((function(e){"string"===typeof e?i.newUnits.push(e):i.inputUnits.push(e)})),console.log(i),a.append("data",JSON.stringify(i)),s={method:"PATCH",credentials:"include",body:a},e.next=12,fetch("".concat(y,"/property/edit/").concat(t),s).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"Delete",credentials:"include"},e.next=3,fetch("".concat(y,"/property/delete/").concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=n(387),G=n(47),W=n.n(G),J=n.p+"static/media/noun-building-4468880.8de9042b.png",H=n.p+"static/media/noun-person-2005172.f53fd7df.png";function Z(e){var t,n=e.property,a=F().loggedInUser;return Object(P.jsxs)(R.a,{item:!0,sx:{display:"flex"},children:[Object(P.jsx)(R.a,{item:!0,sx:{mr:1},children:Object(P.jsx)(j.a,{underline:"none",component:a.account_type===U.tenant?j.a:u.b,to:"/properties/".concat(n._id),children:Object(P.jsx)("img",{alt:n.name,src:n.image_url||J,loading:"lazy",style:{width:"100px",height:"60px",objectFit:"cover"}})})}),Object(P.jsxs)(R.a,{item:!0,children:[Object(P.jsx)(h.a,{variant:"body1",color:"primary",children:n.name}),Object(P.jsx)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:(t=n.address,Object(P.jsxs)(r.a.Fragment,{children:["".concat(t.street_name," ").concat(t.street_address)," ",Object(P.jsx)("br",{}),"".concat(t.city," ").concat(t.state," ").concat(t.zip_code)]}))}),Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:["Units:",n.units.length," | Availability:",n.units.filter((function(e){return!e.tenants.length>0})).length]})]})]})}var Q=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),X=n(25),Y=n(16),$=n(400),ee=n(29),te=n(379),ne=["label","formikKey"];function ae(e){var t=e.label,n=e.formikKey,a=Object(T.a)(e,ne),r=Object(X.c)(n),c=Object(g.a)(r,2),i=c[0],s=c[1];return Object(P.jsx)(te.a,Object(ee.a)({id:i.name,name:i.name,label:t,fullWidth:!0,variant:"standard",helperText:s.touched?s.error:"",error:s.touched&&Boolean(s.error),value:i.value,onChange:i.onChange},a))}var re=n(15),ce=n(388),ie=n(386),se=["label","formikKey"];function oe(e){var t=e.label,n=e.formikKey,r=(Object(T.a)(e,se),Object(X.c)(n)),c=Object(g.a)(r,3),i=c[0],s=c[1],o=c[2],l=Object(a.useState)(""),u=Object(g.a)(l,2),d=u[0],j=u[1];function b(){var e=i.value.map((function(e){var t=new RegExp("([0-9]+)|([a-zA-Z]+)","g");return e.match(t)}));e.sort((function(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]})),e=e.map((function(e){return e.join("")})),o.setValue(e)}return Object(P.jsxs)(R.a,{children:[Object(P.jsx)(ie.a,{htmlFor:i.name,error:s.touched&&Boolean(s.error),children:t}),Object(P.jsx)(X.a,{id:i.name,name:i.name,render:function(e){return Object(P.jsxs)(R.a,{children:[i.value.map((function(t,n){return t instanceof String?Object(P.jsx)(ce.a,{size:"small",label:t,variant:"outlined",onDelete:function(){return e.remove(n)}},n):Object(P.jsx)(ce.a,{size:"small",label:t.name||t,variant:"outlined",onDelete:function(){return e.remove(n)}},n)})),i.value.length>1&&Object(P.jsx)(p.a,{component:"label",onClick:b,children:"sort"})]})}}),Object(P.jsx)(te.a,{id:i.name,name:i.name,fullWidth:!0,multiline:!0,rows:4,variant:"standard",helperText:s.touched&&s.error?s.error:"add units(add multiple separated by a comma)",error:s.touched&&Boolean(s.error),onChange:function(e){return j(e.target.value)},value:d}),Object(P.jsx)(R.a,{container:!0,justifyContent:"flex-end",children:Object(P.jsx)(p.a,{component:"label",onClick:function(){o.setValue([].concat(Object(re.a)(i.value),Object(re.a)(d.split(",").filter((function(e){return e&&e.trim()}))))),j("")},children:"add"})})]})}var le=n(398),ue=n(389),de=["label","formikKey","defaultImage","avatar"];function je(e){var t=e.label,n=e.formikKey,a=e.defaultImage,r=e.avatar,c=(Object(T.a)(e,de),Object(X.c)(n)),i=Object(g.a)(c,2),s=i[0],o=i[1];return Object(P.jsxs)(R.a,{container:!0,direction:"column",alignItems:"center",justifyContent:"center",children:[!r&&Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)("img",{src:s.value instanceof File?URL.createObjectURL(s.value):s.value?s.value:a,style:{width:"300px",height:"180px",objectFit:"cover"},alt:t,onError:function(e){e.target.src=a}})}),r&&Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(ue.a,{src:s.value instanceof File?URL.createObjectURL(s.value):s.value?s.value:a,sx:{width:200,height:200}})}),Object(P.jsxs)(R.a,{item:!0,children:[Object(P.jsxs)(p.a,{component:"label",children:["change",Object(P.jsx)(le.a,{sx:{display:"none"},type:"file",inputProps:{accept:"image/*"},id:s.name,onChange:function(e){return o.setValue(e.target.files[0])}})]}),s.value&&Object(P.jsx)(p.a,{onClick:function(){return o.setValue("")},children:" remove"})]})]})}var be=n(397),me=n(382),he=n(395),pe=n(175),xe=n.n(pe),fe=Object(a.createContext)({updateSnackBarMessage:function(){return null}}),Oe=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(g.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(!1),o=Object(g.a)(s,2),l=o[0],u=o[1],d=Object(a.useCallback)((function(e){i(e),u(!0)}),[]),j=Object(a.useCallback)((function(){u(!1)}),[]),b=Object(a.useCallback)((function(e,t){"clickaway"!==t&&u(!1)}),[]);return Object(P.jsxs)(fe.Provider,{value:{updateSnackBarMessage:d},children:[t,Object(P.jsx)(me.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:l,autoHideDuration:6e3,onClose:b,message:c,action:Object(P.jsx)(he.a,{size:"small","aria-label":"close",color:"inherit",onClick:j,children:Object(P.jsx)(xe.a,{fontSize:"small"})})})]})};function ge(){return Object(a.useContext)(fe)}var ye=function(e,t,n,a){t(!0),n.error?(t(!1),e(n.error.message)):n.success?(console.log("SUCCESS",n.success),a(n),t(!1)):(t(!1),e("An unexpected error occurred. Please try again"))};function ve(e){var t=e.currentProperty,n=e.handleCancel,r=Object(d.g)(),c=ge().updateSnackBarMessage,i=Object(a.useState)(!1),s=Object(g.a)(i,2),o=(s[0],s[1]),l={name:"",units:[],image_url:"",street_name:"",street_address:"",city:"",state:"",zip_code:"",country:""};if(t){l.name=t.name,l.image_url=t.image_url,l.street_name=t.address.street_name,l.street_address=t.address.street_address,l.city=t.address.city,l.state=t.address.state,l.zip_code=t.address.zip_code,l.country=t.address.country;var u=t.units.map((function(e){return{_id:e._id,name:e.name}}));l.units=u}var j=Y.c().shape({name:Y.d().required("Property Name is required").min(5,"Property Name is too short"),units:Y.a().of(Y.b()).min(1,"units is required"),image_url:Y.b(),street_name:Y.d().required("street name is required"),street_address:Y.d().required("street address  is required"),city:Y.d().required("city is required"),state:Y.d().required("state is required"),zip_code:Y.d().required("zip code is required"),country:Y.d().required("country is required")});function b(){(function(e){return B.apply(this,arguments)})(t._id).then((function(e){ye(c,o,e,(function(e){r.push({pathname:"/properties",state:{properties:e.success.propertyList}})}))}))}return Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(be.a,{sx:{p:2},children:Object(P.jsx)(X.b,{enableReinitialize:!0,validateOnChange:!0,initialValues:l,validationSchema:j,onSubmit:function(e,n){var a=n.setSubmitting;t?function(e,t){return M.apply(this,arguments)}(t._id,e).then((function(e){ye(c,a,e,(function(){return r.go(0)}))})):function(e){return z.apply(this,arguments)}(e).then((function(e){ye(c,a,e,(function(){r.push("/properties/".concat(e.success.property._id))}))}))},children:function(e){var a=e.handleSubmit,r=(e.handleChange,e.values,e.touched,e.errors,e.isSubmitting);return Object(P.jsxs)("form",{onSubmit:a,noValidate:!0,children:[Object(P.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",children:"Property"}),Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(je,{label:"image",formikKey:"image_url",defaultImage:J})}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(ae,{label:"Property name",formikKey:"name"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Street name",formikKey:"street_name"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Street address",formikKey:"street_address"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"City",formikKey:"city"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"State/Province/Region",formikKey:"state"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Zip / Postal code",formikKey:"zip_code"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Country",formikKey:"country"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(oe,{label:"Units",formikKey:"units"})})]}),Object(P.jsxs)(R.a,{item:!0,container:!0,spacing:1,justifyContent:"flex-end",children:[Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{type:"submit",variant:"contained",color:"primary",children:r?Object(P.jsx)($.a,{style:{color:"white"}}):t?"Update":"Create"})}),t&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{onClick:b,variant:"outlined",children:"Delete"})}),Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{onClick:n,variant:"outlined",children:"Cancel"})})]})]})]})}})})})}function _e(e){var t=e.currentProperty,n=e.invoiceData,c=Object(a.useState)(!1),i=Object(g.a)(c,2),s=i[0],o=i[1];function l(){o(!s)}var u=W()().year(),d=W()().month(),j=n.filter((function(e){var t=W()(e.due_date).year(),n=W()(e.due_date).month();return u===t&&d===n})),b=j.reduce((function(e,t){return e+Number(t.amount)}),0),m=j.reduce((function(e,t){return t.paid_date?e+Number(t.amount):e}),0);return Object(P.jsxs)(r.a.Fragment,{children:[!s&&Object(P.jsxs)(R.a,{item:!0,container:!0,spacing:3,children:[Object.keys(t).length>0&&Object(P.jsx)(Z,{property:t}),Object(P.jsxs)(R.a,{item:!0,children:[Object(P.jsx)(h.a,{variant:"body1",color:"primary",children:"Total Monthy Rent"}),Object(P.jsx)(h.a,{variant:"body2",color:"text.primary",children:"".concat(Q.format(m),"/").concat(Q.format(b))})]}),Object(P.jsxs)(R.a,{item:!0,children:[Object(P.jsx)(h.a,{variant:"body1",color:"primary",children:"Total Cost"}),Object(P.jsx)(h.a,{variant:"body2",color:"text.primary",children:"".concat(Q.format(t.cost))})]}),Object(P.jsxs)(R.a,{item:!0,children:[Object(P.jsx)(h.a,{variant:"body1",color:"primary",children:"Total Revene"}),Object(P.jsx)(h.a,{variant:"body2",color:"text.primary",children:"".concat(Q.format(m-t.cost))})]}),Object(P.jsx)(R.a,{item:!0,sx:{flexGrow:1},children:Object(P.jsx)(R.a,{container:!0,justifyContent:"flex-end",children:Object(P.jsx)(p.a,{variant:"outlined",onClick:l,children:"edit"})})})]}),s&&Object(P.jsx)(ve,{currentProperty:t,handleCancel:l})]})}var Ce=n(406),Se=n(407),we=n(374),ke=n(380),Pe=n(384),Ie=n(401),Le=n(405),Fe=n(404),Ue=n(402),qe=n(403),Ee=n(312),Te={display:{xs:"block",md:"table-cell"},"& span":{xs:{float:"right"},md:{float:"left"}},borderBottom:{xs:"none",md:"1px solid rgba(224, 224, 224, 1)"}},Ke={"&::before":{xs:{content:"attr(data-th)"},md:{content:'""'}}};function De(e){var t=e.data,n=e.columns,c=e.sortParams,i=Object(a.useState)(),s=Object(g.a)(i,2),o=s[0],u=s[1],d=Object(a.useState)([]),j=Object(g.a)(d,2),b=j[0],m=j[1];Object(a.useEffect)((function(){c&&u(c[0])}),[c]),Object(a.useEffect)((function(){var e=Object(re.a)(t);if(o){var n=Object(g.a)(o.terms,2),a=n[0],r=n[1];e=e.sort((function(e,t){var n=a(e).toString().toLowerCase(),c=a(t).toString().toLowerCase();if(n===c){if(r){var i=r(e).toString().toLowerCase(),s=r(t).toString().toLowerCase();return i===s?0:i>s?1:-1}return 0}return n>c?1:-1}))}m(e)}),[t,o]);return Object(P.jsxs)(r.a.Fragment,{children:[c&&o&&Object(P.jsx)(R.a,{container:!0,justifyContent:"flex-end",sx:{mb:2},children:c.map((function(e){return Object(P.jsx)(p.a,{onClick:function(){return function(e){u(e)}(e)},variant:"outlined",size:"small",sx:o.label===e.label?{mr:.2,backgroundColor:Object(Ee.a)(l.palette.primary.main,.1)}:{mr:.2},children:e.label},e.label)}))}),Object(P.jsxs)(Ie.a,{size:"small",children:[Object(P.jsx)(Ue.a,{sx:{display:{xs:"none",md:"table-header-group"}},children:Object(P.jsx)(qe.a,{children:n.map((function(e){return Object(P.jsx)(Fe.a,{children:e.label},e.label)}))})}),Object(P.jsx)(Le.a,{children:b.map((function(e,t){return Object(P.jsx)(qe.a,{sx:{borderBottom:1,borderColor:"divider"},children:n.map((function(t,n){return Object(P.jsx)(Fe.a,{"data-th":t.label,sx:t.hideLabel?Te:Object(ee.a)(Object(ee.a)({},Te),Ke),children:t.content(e)},t.label+e.id)}))},e.id||t)}))})]})]})}function Ne(e){var t=e.label,n=e.tabs,c=e.columns,i=e.toggleLabel,s=e.toggleContent,o=e.sortParams,l=Object(a.useState)("0"),u=Object(g.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(!1),m=Object(g.a)(b,2),x=m[0],f=m[1];function O(){f(!x)}return Object(P.jsx)(r.a.Fragment,{children:Object(P.jsxs)(R.a,{item:!0,xs:12,children:[!x&&Object(P.jsx)(be.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:Object(P.jsxs)(we.a,{value:d,children:[Object(P.jsxs)(Ce.a,{sx:{borderBottom:1,borderColor:"divider"},children:[Object(P.jsxs)(R.a,{container:!0,children:[Object(P.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",children:t}),i&&Object(P.jsx)(R.a,{item:!0,sx:{flexGrow:1},children:Object(P.jsx)(R.a,{container:!0,justifyContent:"flex-end",children:Object(P.jsx)(p.a,{variant:"outlined",onClick:O,children:i})})})]}),Object(P.jsx)(ke.a,{onChange:function(e,t){j(t)},"aria-label":"lab API tabs example",children:n.map((function(e,t){return Object(P.jsx)(Se.a,{label:e.label,value:t.toString()},e.label+t)}))})]}),n.map((function(e,t){return Object(P.jsx)(Pe.a,{value:t.toString(),children:Object(P.jsx)(De,{data:e.content,columns:c,sortParams:o})},e.label+t+"panel")}))]})}),x&&r.a.cloneElement(s,{handleCancel:O})]})})}function Ae(e){var t=e.tenant,n=function(e){return"".concat(e.first_name,"  ").concat(e.last_name)};return t?Object(P.jsx)(j.a,{underline:"none",component:u.b,to:"/tenants/".concat(t._id),children:Object(P.jsxs)(R.a,{container:!0,direction:"row",alignItems:"center",children:[Object(P.jsx)(ue.a,{sx:{marginRight:"1em"},alt:n(t.user),src:t.user.image_url}),n(t.user)]})}):null}function Ve(e){var t=e.data,n=e.loadingState,a=e.notFoundState,r=e.children;return n(t)?Object(P.jsx)(R.a,{container:!0,column:!0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(P.jsx)($.a,{})}):a(t)?Object(P.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",align:"center",children:"Not Found"}):r}function ze(e){return W()(e).format("ll")}var Me=["image_url"];function Be(){return Re.apply(this,arguments)}function Re(){return(Re=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/tenant"),t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return(Ge=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/tenant/").concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(O.a)(f.a.mark((function e(t){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,a=t.image_url,r=Object(T.a)(t,Me),n.append("file",a),n.append("data",JSON.stringify(r)),c={method:"POST",credentials:"include",body:n},e.next=7,fetch("".concat(y,"/auth/register"),c).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t,n){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(O.a)(f.a.mark((function e(t,n,a){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("file",a.image_url),a.tenant_id=n,r.append("data",JSON.stringify(a)),c={method:"PATCH",credentials:"include",body:r},e.next=7,fetch("".concat(y,"/user/edit/").concat(t),c).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"Delete",credentials:"include"},e.next=3,fetch("".concat(y,"/tenant/delete/").concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ye=n(408),$e=["label","formikKey","itemArray","itemValue","itemLabel"];function et(e){var t=e.label,n=e.formikKey,a=e.itemArray,r=e.itemValue,c=e.itemLabel,i=Object(T.a)(e,$e),s=Object(X.c)(n),o=Object(g.a)(s,2),l=o[0],u=o[1];return Object(P.jsx)(te.a,Object(ee.a)(Object(ee.a)({select:!0,id:l.name,name:l.name,label:t,fullWidth:!0,variant:"standard",helperText:u.touched?u.error:"",error:u.touched&&Boolean(u.error),value:l.value,onChange:l.onChange},i),{},{children:a.map((function(e){return Object(P.jsx)(Ye.a,{value:r(e),children:c(e)},r(e))}))}))}function tt(e){var t=e.current,n=e.handleCancel,r=Object(d.g)(),c=Object(a.useState)([]),i=Object(g.a)(c,2),s=i[0],o=i[1],l=ge().updateSnackBarMessage,u=Object(a.useState)(!1),j=Object(g.a)(u,2),b=(j[0],j[1]);Object(a.useEffect)((function(){N().then((function(e){console.log(e),o(e)}))}),[]);var m=[{name:"tenant",label:"Tenant"},{name:"admin",label:"Admin"},{name:"maintenance",label:"Maintenance"},{name:"owner",label:"Owner"}],x={first_name:"",last_name:"",image_url:"",phone_number:"",email:"",account_type:"",password:"",property:"",unit:""};console.log(t),t&&(x.first_name=t.user.first_name,x.last_name=t.user.last_name,x.image_url=t.user.image_url,x.phone_number=t.user.phone_number,x.email=t.user.email,x.account_type=t.user.account_type,x.property=t.property._id,x.unit=t.unit._id);var f=Y.c().shape({first_name:Y.d().required("Property Name is required").max(40,"Property Name is too long"),last_name:Y.d().required("last_name is required"),image_url:Y.b(),phone_number:Y.d().required("phone_number is required"),email:Y.d().email().required("email is required"),account_type:Y.d().required("account_type is required"),password:t?Y.d():Y.d().required("password is required"),property:Y.d(),unit:Y.d()});function O(){Qe(t._id).then((function(e){ye(l,b,e,(function(){r.push({pathname:"/tenants"})}))}))}return Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(be.a,{sx:{p:2},children:Object(P.jsx)(X.b,{enableReinitialize:!0,initialValues:x,validationSchema:f,onSubmit:function(e,n){var a=n.setSubmitting;t?He(t.user._id,t._id,e).then((function(e){a(!0);ye(l,a,e,(function(){return r.go(0)}))})):We(e).then((function(e){a(!0),e.error?(console.error({error:e.error.message}),a(!1)):e.success?(a(!1),r.push({pathname:"/tenants/".concat(e.success.tenant._id)})):(console.error({data:e}),a(!1))}))},children:function(e){var a=e.handleSubmit,r=(e.handleChange,e.values),c=(e.touched,e.errors,e.isSubmitting);return Object(P.jsxs)("form",{onSubmit:a,noValidate:!0,children:[Object(P.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",children:"Tenant"}),Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(je,{label:"image",formikKey:"image_url",defaultImage:H,avatar:!0})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(et,{label:"Property",formikKey:"property",itemArray:s,itemValue:function(e){return e._id},itemLabel:function(e){return e.name}})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(et,{disabled:""===r.property,label:""===r.property?"select property first":"Unit",formikKey:"unit",itemArray:r.property&&s.length>0?s.filter((function(e){return e._id===r.property}))[0].units:[""],itemValue:function(e){return e._id},itemLabel:function(e){return e.name}})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"First Name",formikKey:"first_name"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Last Name",formikKey:"last_name"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Phone Number",formikKey:"phone_number"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Email",formikKey:"email"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(et,{label:"Account type",formikKey:"account_type",itemArray:m,itemValue:function(e){return e.name},itemLabel:function(e){return e.label}})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Password",formikKey:"password"})}),Object(P.jsxs)(R.a,{item:!0,container:!0,spacing:1,justifyContent:"flex-end",children:[Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{type:"submit",variant:"contained",color:"primary",children:c?Object(P.jsx)($.a,{style:{color:"white"}}):t?"Update":"Create"})}),t&&Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{onClick:O,variant:"outlined",children:"Delete"})})}),n&&Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{onClick:n,variant:"outlined",children:"Cancel"})})]})]})]})}})})})}var nt=["media"],at=["media"];function rt(){return(rt=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/maintenance"),t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/maintenance/").concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=Object(O.a)(f.a.mark((function e(t){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,a=t.media,r=Object(T.a)(t,nt),a.forEach((function(e){n.append("files",e)})),n.append("data",JSON.stringify(r)),c={method:"POST",credentials:"include",body:n},e.next=7,fetch("".concat(y,"/maintenance/new"),c).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(){return(st=Object(O.a)(f.a.mark((function e(t,n){var a,r,c,i,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,r=n.media,c=Object(T.a)(n,at),i=[],s=[],r.forEach((function(e){e instanceof File?(i.push(e),a.append("files",e)):s.push(e)})),c.media=s,console.log("media",r),console.log("fileObjs",i),console.log("fileUrls",s),a.append("data",JSON.stringify(c)),o={method:"PATCH",credentials:"include",body:a},e.next=13,fetch("".concat(y,"/maintenance/edit/").concat(t),o).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return(ot=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"Delete",credentials:"include"},e.next=3,fetch("".concat(y,"/maintenance/delete/").concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt=n(409),ut=n(411),dt=n(410),jt=["label","formikKey"];function bt(e){var t=e.label,n=e.formikKey,a=(Object(T.a)(e,jt),Object(X.c)(n)),c=Object(g.a)(a,3),i=c[0],s=c[1],o=c[2];return Object(P.jsxs)(R.a,{children:[Object(P.jsx)(ie.a,{sx:{mb:1},htmlFor:i.name,error:s.touched&&Boolean(s.error),children:t}),Object(P.jsxs)(R.a,{container:!0,spacing:2,children:[Object(P.jsx)(X.a,{id:i.name,name:i.name,render:function(e){return Object(P.jsx)(r.a.Fragment,{children:i.value.map((function(n,a){return Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(P.jsxs)(lt.a,{children:[Object(P.jsx)(dt.a,{component:"img",height:"200",image:n instanceof File?URL.createObjectURL(n):n,alt:t}),Object(P.jsx)(ut.a,{children:Object(P.jsx)(p.a,{size:"small",onClick:function(){return e.remove(a)},children:"remove"})})]})},a)}))})}}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(P.jsx)(lt.a,{sx:{height:"100%",minHeight:200},children:Object(P.jsx)(R.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",sx:{height:"100%"},children:Object(P.jsx)(ut.a,{children:Object(P.jsxs)(p.a,{component:"label",children:["Upload images",Object(P.jsx)(le.a,{sx:{display:"none"},type:"file",inputProps:{accept:"image/*",multiple:!0},label:"mew",id:i.name,onChange:function(e){return o.setValue([].concat(Object(re.a)(i.value),Object(re.a)(e.target.files)))}})]})})})})})]}),Object(P.jsx)(te.a,{fullWidth:!0,variant:"standard",helperText:s.touched?s.error:"",error:s.touched&&Boolean(s.error),value:i.value,disabled:!0,sx:{".MuiInput-root input":{display:"none"},".MuiInput-root::before":{borderBottom:"none"},".MuiInput-root::after":{borderBottom:"none"}}})]})}function mt(e){var t=e.currentMaintenance,n=e.handleCancel,r=e.tenantList,c=Object(d.g)(),i=F().loggedInUser,s=ge().updateSnackBarMessage,o=Object(a.useState)(!1),l=Object(g.a)(o,2),u=(l[0],l[1]),j=i.account_type===U.tenant,b={tenant:"",title:"",body:"",status:"",media:[],location:""};t&&(b.tenant=t.tenant._id,b.title=t.title,b.body=t.body,b.status=t.status,b.location=t.location,b.media=t.media),j&&(b.tenant=i.tenant._id);var m=Object(a.useState)([]),x=Object(g.a)(m,2),f=x[0],O=x[1];Object(a.useEffect)((function(){j?O([i.tenant]):r?O(r):Be().then((function(e){O(e)}))}),[j,i,r]);var y=[{name:"open",label:"open"},{name:"close",label:"close"},{name:"pending",label:"pending"}],v=Y.c().shape({tenant:Y.d().required("tenant is required"),title:Y.d().required("title is required"),body:Y.d().required("body is required"),status:Y.d().required("state is required"),location:Y.d().required("location is required"),media:Y.a().of(Y.b()).min(1,"at least one image is required")});function _(){(function(e){return ot.apply(this,arguments)})(t).then((function(e){ye(s,u,e,(function(e){c.push({pathname:"/properties",state:{properties:e.success.propertyList}})}))}))}return Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(be.a,{sx:{p:2},children:Object(P.jsx)(X.b,{enableReinitialize:!0,validateOnChange:!0,initialValues:b,validationSchema:v,onSubmit:function(e,n){var a=n.setSubmitting;t?function(e,t){return st.apply(this,arguments)}(t._id,e).then((function(e){ye(s,a,e,(function(){return c.go(0)}))})):(e.property=f.filter((function(t){return t._id===e.tenant}))[0].property,function(e){return it.apply(this,arguments)}(e).then((function(e){ye(s,a,e,(function(){c.push("/maintenances/".concat(e.success.maintenance._id))}))})))},children:function(e){var a=e.handleSubmit,r=(e.handleChange,e.values),c=(e.touched,e.errors,e.isSubmitting);return Object(P.jsxs)("form",{onSubmit:a,noValidate:!0,children:[Object(P.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",children:"Maintenance"}),Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(et,{label:"Status",formikKey:"status",itemArray:y,itemValue:function(e){return e.name},itemLabel:function(e){return e.label}})}),!t&&Object(P.jsxs)(P.Fragment,{children:[!j&&Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(et,{label:"Tenant",formikKey:"tenant",itemArray:f,itemValue:function(e){return e._id},itemLabel:function(e){return"".concat(e.user.first_name," ").concat(e.user.last_name)}})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(et,{disabled:""===r.tenant,label:""===r.tenant?"select tenant first":"location",formikKey:"location",itemArray:[{_id:"common",name:"common"},r.tenant&&f.length>0&&f.filter((function(e){return e._id===r.tenant}))[0].unit],itemValue:function(e){return e._id},itemLabel:function(e){return e.name}})})]}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(ae,{label:"Title (short description)",formikKey:"title"})}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(ae,{label:"Body( detailed description)",formikKey:"body",multiline:!0,rows:4})}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(bt,{label:"Images",formikKey:"media"})}),Object(P.jsxs)(R.a,{container:!0,item:!0,spacing:1,justifyContent:"flex-end",children:[Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{type:"submit",variant:"contained",color:"primary",children:c?Object(P.jsx)($.a,{style:{color:"white"}}):t?"Update":"Create"})}),t&&Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{onClick:_,variant:"outlined",children:"Delete"})}),n&&Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{onClick:n,variant:"outlined",children:"Cancel"})})]})]})]})}})})})}function ht(e){var t=e.propertyId,n=(F().loggedInUser,"add"===t),r=Object(a.useState)(),c=Object(g.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)([]),l=Object(g.a)(o,2),d=l[0],b=l[1],m=Object(a.useState)([]),h=Object(g.a)(m,2),p=h[0],x=h[1],f=Object(a.useState)([]),O=Object(g.a)(f,2),y=O[0],v=O[1],_=Object(a.useState)([]),C=Object(g.a)(_,2),S=C[0],w=C[1],k=Object(a.useState)(),I=Object(g.a)(k,2),L=I[0],U=I[1];Object(a.useEffect)((function(){U(null),!n&&t&&function(e){return V.apply(this,arguments)}(t).then((function(e){if(U(e),!e.message){var t={};e.tenants.forEach((function(e){t[e._id]=e})),s(t),b(e.tenants),x(e.maintenances),v(e.invoices),w(e.leases)}}))}),[t,n]);var q=[{label:"Name",content:function(e){return Object(P.jsx)(Ae,{tenant:e})},hideLabel:!0},{label:"Unit",content:function(e){return Object(P.jsx)("span",{children:e.unit.name})}},{label:"Phone",content:function(e){return Object(P.jsx)("span",{children:e.user.phone_number})}},{label:"Email",content:function(e){return Object(P.jsx)("span",{children:e.user.email})}},{label:"Overdue",content:function(e){return Object(P.jsx)("span",{children:e.isLate?"late":"paid"})}}],E=d.filter((function(e){return e.isLate})),T=[{label:"".concat(d.length," tenants"),content:d},{label:"".concat(E.length," unpaid"),content:E}],K=[{label:"Date",content:function(e){return Object(P.jsx)("span",{children:ze(e.date)})}},{label:"Issue",content:function(e){return Object(P.jsx)("span",{children:e.title})}},{label:"Location",content:function(e){return Object(P.jsx)("span",{children:"common"===e.location?"common":i[e.tenant]&&i[e.tenant].unit.name})}},{label:"Name",content:function(e){return Object(P.jsx)(Ae,{tenant:i[e.tenant]})},hideLabel:!0},{label:"Status",content:function(e){return Object(P.jsx)("span",{children:e.status})}},{label:"",content:function(e){return Object(P.jsx)(j.a,{underline:"none",component:u.b,to:"/maintenances/".concat(e._id),children:Object(P.jsx)("span",{children:"view"})})}}],D=p.filter((function(e){return"close"!==e.status})),N=[{label:"".concat(D.length," open"),content:D},{label:"".concat(p.length," total"),content:p}],A=[{label:"date",terms:[function(e){return ze(e.date)}]},{label:"name",terms:[function(e){return i[e.tenant].user.first_name}]},{label:"unit",terms:[function(e){return i[e.tenant].unit.name}]}],z=[{label:"Due Date",content:function(e){return Object(P.jsx)("span",{children:ze(e.due_date)})}},{label:"Name",content:function(e){return Object(P.jsx)(Ae,{tenant:i[e.tenant]})},hideLabel:!0},{label:"Amount",content:function(e){return Object(P.jsx)("span",{children:Q.format(e.amount)})}},{label:"Paid Date",content:function(e){return Object(P.jsx)("span",{children:"".concat(ze(e.paid_date)," ").concat(e.is_late?"(late)":"")})}},{label:"",content:function(e){return Object(P.jsx)(j.a,{underline:"none",component:u.b,to:"/invoices/".concat(e._id),children:Object(P.jsx)("span",{children:"view"})})}}],M=y.filter((function(e){var t=W()(e.due_date).isAfter(W()([]));return!e.paid_date||t})),B=[{label:"".concat(M.length," current"),content:M},{label:"".concat(y.length," total"),content:y}],G=[{label:"date",terms:[function(e){return ze(e.paid_date)}]},{label:"name",terms:[function(e){return i[e.tenant].user.first_name}]}],J=[{label:"Name",content:function(e){return Object(P.jsx)(Ae,{tenant:i[e.tenant]})},hideLabel:!0},{label:"monthly_rent",content:function(e){return Object(P.jsx)("span",{children:Q.format(e.monthly_rent)})}},{label:"start_date",content:function(e){return Object(P.jsx)("span",{children:ze(e.start_date)})}},{label:"end_date",content:function(e){return Object(P.jsx)("span",{children:ze(e.end_date)})}},{label:"",content:function(e){return Object(P.jsx)(j.a,{underline:"none",component:u.b,to:"/leases/".concat(e._id),children:Object(P.jsx)("span",{children:"view"})})}}],H=S.filter((function(e){return W()(e.end_date).isAfter(W()([]))})),Z=[{label:"".concat(H.length," current"),content:H},{label:"".concat(S.length," total"),content:S}],X=[{label:"date",terms:[function(e){return ze(e.end_date)}]},{label:"name",terms:[function(e){return i[e.tenant].user.first_name}]}];return n?Object(P.jsx)(R.a,{container:!0,spacing:3,children:Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(ve,{})})}):Object(P.jsx)(Ve,{data:L,loadingState:function(e){return!e},notFoundState:function(e){return e.message},children:L&&Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(_e,{currentProperty:L,invoiceData:y}),Object(P.jsx)(Ne,{label:"Tenants",tabs:T,columns:q,sortParams:[{label:"name",terms:[function(e){return e.user.first_name}]},{label:"unit",terms:[function(e){return e.unit.name}]}],toggleLabel:"add",toggleContent:Object(P.jsx)(tt,{})}),Object(P.jsx)(Ne,{label:"Maintenances",tabs:N,columns:K,sortParams:A,toggleLabel:"add",toggleContent:Object(P.jsx)(mt,{tenantList:d})}),Object(P.jsx)(Ne,{label:"Invoices",tabs:B,columns:z,sortParams:G}),Object(P.jsx)(Ne,{label:"Leases",tabs:Z,columns:J,sortParams:X})]})})}var pt=n(396);function xt(e){var t=e.side,n=e.view;return Object(P.jsx)(pt.a,{sx:{mt:4,mb:4},children:Object(P.jsxs)(R.a,{container:!0,sx:{flexDirection:{xs:"column",md:"row"}},spacing:3,children:[Object(P.jsx)(R.a,{item:!0,xs:12,md:3,children:t}),Object(P.jsx)(R.a,{item:!0,xs:12,md:9,children:Object(P.jsx)(be.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:n})})]})})}var ft=n(377),Ot=n(376),gt=n(399),yt=n(413),vt=n(412),_t=n(375),Ct=n(383),St=n(415),wt=n(414),kt=n(180),Pt=n.n(kt),It=n(178),Lt=n.n(It),Ft=n(179),Ut=n.n(Ft),qt={"&.selected":{color:l.palette.primary.main}};function Et(e){var t=e.handleChange,n=e.selectedId,c=e.data,i=e.path,s=e.itemContent,o=e.onSort,d=e.onSearch,j=e.onClear,b=e.sortParams,m=e.selectedSort,h=e.isAdd,x=Object(a.useState)(""),f=Object(g.a)(x,2),O=f[0],y=f[1];return Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsx)(te.a,{label:"search",sx:{width:"100%"},onChange:function(e){return function(e){var t=e.target.value;y(t),t?d(t):j()}(e)},value:O,InputProps:{endAdornment:Object(P.jsx)(vt.a,{position:"end",children:Object(P.jsx)(he.a,{"aria-label":"toggle password visibility",onClick:function(e){return y(""),void j()},edge:"end",children:Object(P.jsx)(Lt.a,{})})})}}),Object(P.jsx)(R.a,{container:!0,justifyContent:"flex-end",sx:{mt:2},children:b.map((function(e){return Object(P.jsx)(p.a,{onClick:function(){return o(e)},variant:"outlined",size:"small",sx:m===e.label?{mr:.2,backgroundColor:Object(Ee.a)(l.palette.primary.main,.1)}:{mr:.2},children:e.label},e.label)}))}),Object(P.jsxs)(gt.a,{children:[h&&Object(P.jsxs)(yt.a,{alignItems:"center",onClick:t("panel1"),component:u.c,to:"/".concat(i,"/add"),activeClassName:"selected",sx:qt,selected:"add"===n,children:[Object(P.jsx)(Ut.a,{}),"add"]}),c.length>0&&c.map((function(e){return Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsx)(yt.a,{alignItems:"center",onClick:t("panel1"),component:u.c,to:"/".concat(i,"/").concat(e._id),activeClassName:"selected",sx:qt,selected:n===e._id.toString(),children:s(e)}),Object(P.jsx)(_t.a,{component:"li"})]},e._id)}))]})]})}function Tt(e){var t=e.selectedId,n=e.data,c=void 0===n?[]:n,i=e.path,s=e.itemContent,o=e.sortParams,l=e.searchParms,u=e.collapsedText,d=e.isAdd,j=r.a.useState(!1),b=Object(g.a)(j,2),m=b[0],p=b[1],x=Object(a.useState)([]),f=Object(g.a)(x,2),O=f[0],y=f[1],v=Object(a.useState)(),_=Object(g.a)(v,2),C=_[0],S=_[1],w=Object(a.useState)(),k=Object(g.a)(w,2),I=k[0],L=k[1],F=Object(a.useState)(),U=Object(g.a)(F,2),q=U[0],E=U[1],T=function(e){return function(t,n){p(!!n&&e)}},K=c.filter((function(e){return e._id.toString()===t}))[0];Object(a.useEffect)((function(){E(o[0].label),S(o[0].terms)}),[c,o]),Object(a.useEffect)((function(){var e=Object(re.a)(c);I&&(e=c.filter((function(e){return l(e).toLowerCase().includes(I.toLowerCase())})));var t=e;if(C){var n=Object(g.a)(C,2),a=n[0],r=n[1];t=e.sort((function(e,t){var n=a(e).toString().toLowerCase(),c=a(t).toString().toLowerCase();if(n===c){if(r){var i=r(e).toString().toLowerCase(),s=r(t).toString().toLowerCase();return i===s?0:i>s?1:-1}return 0}return n>c?1:-1}))}y(t)}),[c,C,I,l]);var D=function(e){S(e.terms),E(e.label)},N=function(e){L(e)},A=function(){L("")};return Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsx)(Ce.a,{sx:{display:{xs:"block",md:"none"}},children:Object(P.jsxs)(Ct.a,{expanded:"panel1"===m,onChange:T("panel1"),children:[Object(P.jsxs)(wt.a,{expandIcon:Object(P.jsx)(Pt.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:[Object(P.jsx)(h.a,{sx:{width:"66%",flexShrink:0},children:K&&u.primary(K)||"add"}),Object(P.jsx)(h.a,{sx:{color:"text.secondary"},children:K&&u.secondary(K)})]}),Object(P.jsx)(St.a,{children:Object(P.jsx)(Et,{handleChange:T,selectedId:t,data:O,path:i,itemContent:s,onSort:D,onSearch:N,onClear:A,sortParams:o,selectedSort:q,isAdd:d})})]})}),Object(P.jsx)(Ce.a,{sx:{display:{xs:"none",md:"block"}},children:Object(P.jsx)(Et,{handleChange:function(){},selectedId:t,data:O,path:i,itemContent:s,onSort:D,onSearch:N,onClear:A,sortParams:o,selectedSort:q,isAdd:d})})]})}function Kt(e){var t=e.selectedId,n=e.data;return Object(P.jsx)(Tt,{selectedId:t,data:n,path:"properties",itemContent:function(e){return Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsx)(Ot.a,{sx:{paddingRight:"2ch"},children:Object(P.jsx)("img",{alt:e.name,src:e.image_url||J,style:{width:"100px",height:"60px",objectFit:"cover"},loading:"lazy"})}),Object(P.jsx)(ft.a,{primary:e.name,secondary:Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:["Units:",e.units.length]}),Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:["Availability:",e.units.filter((function(e){return!e.tenants.length>0})).length]})]})})]})},sortParams:[{label:"name",terms:[function(e){return e.name}]},{label:"units",terms:[function(e){return e.units}]}],searchParms:function(e){return e.name},collapsedText:{primary:function(e){return e.name},secondary:function(e){return"".concat(e.units.length," units")}},isAdd:!0})}function Dt(){var e=Object(d.i)().id,t=Object(a.useState)(),n=Object(g.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),s=Object(g.a)(i,2),o=s[0],l=s[1],u=Object(d.g)(),j=Object(d.h)();return Object(a.useEffect)((function(){j.state?l(j.state.properties):N().then((function(e){l(e)}))}),[j]),Object(a.useEffect)((function(){!e&&o.length>0?(c(o[0]._id),u.replace("/properties/".concat(o[0]._id))):e&&o.length>0&&c(e)}),[u,o,c,e]),Object(P.jsx)(xt,{side:Object(P.jsx)(Kt,{selectedId:e,data:o}),view:Object(P.jsx)(ht,{propertyId:r})})}function Nt(e){var t=e.label,n=e.current,a=e.handleSubmit,r=e.handleDelete,c=e.handleCancel,i=e.deleteSubmitting,s=e.child,o=e.childNamespace,l=e.childValidationSchema,u=e.childInitialValues,d=Object(ee.a)({first_name:"",last_name:"",image_url:"",phone_number:"",email:"",password:""},u);n&&(d.first_name=n.first_name,d.last_name=n.last_name,d.image_url=n.image_url,d.phone_number=n.phone_number,d.email=n.email);var j=Y.c().shape(Object(ee.a)({first_name:Y.d().required("Property Name is required").max(40,"Property Name is too long"),last_name:Y.d().required("last_name is required"),image_url:Y.b(),phone_number:Y.d().required("phone_number is required"),email:Y.d().email().required("email is required"),password:n?Y.d():Y.d().required("password is required")},l));return Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(be.a,{sx:{p:2},children:Object(P.jsx)(X.b,{enableReinitialize:!0,initialValues:d,validationSchema:j,onSubmit:a,children:function(e){var a=e.handleSubmit,l=(e.handleChange,e.values),u=(e.touched,e.errors,e.isSubmitting);return Object(P.jsxs)("form",{onSubmit:a,noValidate:!0,children:[Object(P.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",children:t}),Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[s(l,o),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(je,{label:"image",formikKey:"image_url",defaultImage:H,avatar:!0})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"First Name",formikKey:"first_name"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Last Name",formikKey:"last_name"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Phone Number",formikKey:"phone_number"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Email",formikKey:"email"})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(ae,{label:"Password",formikKey:"password"})}),Object(P.jsxs)(R.a,{item:!0,container:!0,spacing:1,justifyContent:"flex-end",children:[Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{type:"submit",variant:"contained",color:"primary",children:u?Object(P.jsx)($.a,{style:{color:"white"}}):n?"Update":"Create"})}),n&&Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{onClick:r,variant:"outlined",children:i?Object(P.jsx)($.a,{style:{color:"white"}}):"Delete"})})}),c&&Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(p.a,{onClick:c,variant:"outlined",children:"Cancel"})})]})]})]})}})})})}function At(e){var t=e.current,n=e.handleCancel,r=Object(d.g)(),c=ge().updateSnackBarMessage,i=Object(a.useState)(!1),s=Object(g.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)([]),j=Object(g.a)(u,2),b=j[0],m=j[1];Object(a.useEffect)((function(){N().then((function(e){m(e)}))}),[]);var h={account_type:"tenant",property:"",unit:""};t&&(h.property=t.property._id,h.unit=t.unit._id);var p={property:Y.d().required("property is required"),unit:Y.d().required("unit is required")};return Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(Nt,{label:"Tenant",current:t,handleSubmit:function(e,n){var a=n.setSubmitting;t?He(t.user._id,t._id,e).then((function(e){a(!0);ye(c,a,e,(function(){return r.go(0)}))})):We(e).then((function(e){ye(c,a,e,(function(){r.push("/tenants/".concat(e.success.tenant._id))}))}))},handleDelete:function(){Qe(t._id).then((function(e){ye(c,l,e,(function(){r.push({pathname:"/tenants"})}))}))},handleCancel:n,deleteSubmitting:o,child:function(e,t){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(et,{label:"Property",formikKey:"property",itemArray:b,itemValue:function(e){return e._id},itemLabel:function(e){return e.name}})}),Object(P.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(et,{disabled:""===e.property,label:""===e.property?"select property first":"Unit",formikKey:"unit",itemArray:e.property&&b.length>0?b.filter((function(t){return t._id===e.property}))[0].units:[""],itemValue:function(e){return e._id},itemLabel:function(e){return e.name}})})]})},childNamespace:"tenant",childValidationSchema:p,childInitialValues:h})})}function Vt(){return Object(P.jsxs)(pt.a,{sx:{mt:4,mb:4},children:["Dashboard",Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(mt,{}),Object(P.jsx)(At,{})]})]})}function zt(e){var t=e.tenant,n=F().loggedInUser,a=function(e){return"".concat(e.first_name,"  ").concat(e.last_name)};return Object(P.jsxs)(R.a,{item:!0,sx:{display:"flex"},children:[Object(P.jsx)(R.a,{item:!0,sx:{mr:1},children:Object(P.jsx)(j.a,{underline:"none",component:n.account_type===U.tenant?j.a:u.b,to:"/tenants/".concat(t._id),children:Object(P.jsx)(ue.a,{sx:{marginRight:"1em",width:60,height:60},alt:a(t.user),src:t.user.image_url||H})})}),Object(P.jsxs)(R.a,{item:!0,children:[Object(P.jsx)(h.a,{variant:"body1",color:"primary",children:a(t.user)}),Object(P.jsx)(h.a,{sx:{display:"block"},variant:"body2",color:"text.primary",children:t.user.phone_number}),Object(P.jsx)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:t.user.email}),Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:["Unit: ",t.unit.name]})]})]})}function Mt(e){var t=e.currentTenant,n=Object(a.useState)(!1),c=Object(g.a)(n,2),i=c[0],s=c[1];function o(){s(!i)}return Object(P.jsxs)(r.a.Fragment,{children:[!i&&Object(P.jsxs)(R.a,{item:!0,container:!0,spacing:3,children:[t.user&&Object(P.jsx)(zt,{tenant:t}),Object(P.jsx)(R.a,{item:!0,children:t.property&&Object(P.jsx)(Z,{property:t.property})}),Object(P.jsx)(R.a,{item:!0,sx:{flexGrow:1},children:Object(P.jsx)(R.a,{container:!0,justifyContent:"flex-end",children:Object(P.jsx)(p.a,{variant:"outlined",onClick:o,children:"edit"})})})]}),i&&Object(P.jsx)(tt,{current:t,handleCancel:o})]})}function Bt(e){var t=e.label,n=e.data,c=e.columns,i=e.toggleLabel,s=e.toggleContent,o=e.children,l=Object(a.useState)(!1),u=Object(g.a)(l,2),d=u[0],j=u[1];function b(){j(!d)}return Object(P.jsxs)(r.a.Fragment,{children:[!d&&Object(P.jsxs)(be.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:[Object(P.jsxs)(R.a,{container:!0,children:[Object(P.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",children:t}),i&&Object(P.jsx)(R.a,{item:!0,sx:{flexGrow:1},children:Object(P.jsx)(R.a,{container:!0,justifyContent:"flex-end",children:Object(P.jsx)(p.a,{variant:"outlined",onClick:b,children:i})})})]}),Object(P.jsx)(De,{data:n,columns:c}),o]}),d&&r.a.cloneElement(s,{handleCancel:b})]})}function Rt(e){var t=e.tenantId,n=(F().loggedInUser,"add"===t),r=Object(a.useState)([]),c=Object(g.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)([]),l=Object(g.a)(o,2),d=l[0],b=l[1],m=Object(a.useState)([]),h=Object(g.a)(m,2),p=h[0],x=h[1],f=Object(a.useState)(),O=Object(g.a)(f,2),y=O[0],v=O[1];Object(a.useEffect)((function(){v(null),!n&&t&&function(e){return Ge.apply(this,arguments)}(t).then((function(e){v(e),s(e.maintenances),b(e.invoices),x(e.leases)}))}),[t,n]);var _=[{label:"Date",content:function(e){return Object(P.jsx)("span",{children:ze(e.date)})}},{label:"Issue",content:function(e){return Object(P.jsx)("span",{children:e.title})}},{label:"Location",content:function(e){return Object(P.jsx)("span",{children:"common"===e.location?"common":y.unit.name})}},{label:"Status",content:function(e){return Object(P.jsx)("span",{children:e.status})}},{label:"",content:function(e){return Object(P.jsx)(j.a,{underline:"none",component:u.b,to:"/maintenances/".concat(e._id),children:Object(P.jsx)("span",{children:"view"})})}}],C=[{label:"amount",content:function(e){return Object(P.jsx)("span",{children:Q.format(e.amount)})}},{label:"due date",content:function(e){return Object(P.jsx)("span",{children:ze(e.due_date)})}},{label:"paid date ",content:function(e){return Object(P.jsx)("span",{children:ze(e.paid_date)})}},{label:"",content:function(e){return Object(P.jsx)(j.a,{underline:"none",component:u.b,to:"/invoices/".concat(e._id),children:Object(P.jsx)("span",{children:"view"})})}}],S=[{label:"monthly rent",content:function(e){return Object(P.jsx)("span",{children:Q.format(e.monthly_rent)})}},{label:"start date",content:function(e){return Object(P.jsx)("span",{children:ze(e.start_date)})}},{label:"end date ",content:function(e){return Object(P.jsx)("span",{children:ze(e.end_date)})}},{label:"",content:function(e){return Object(P.jsx)(j.a,{underline:"none",component:u.b,to:"/leases/".concat(e._id),children:Object(P.jsx)("span",{children:"view"})})}}];return n?Object(P.jsx)(R.a,{container:!0,spacing:3,children:Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(At,{})})}):Object(P.jsx)(Ve,{data:y,loadingState:function(e){return!e},notFoundState:function(e){return e.message},children:y&&Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(Mt,{currentTenant:y}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(Bt,{label:"Maintenance",data:i,columns:_,toggleLabel:"add",toggleContent:Object(P.jsx)(mt,{})})}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(Bt,{label:"Invoices",data:d,columns:C})}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(Bt,{label:"Leases",data:p,columns:S})})]})})}var Gt=n(416);function Wt(e){var t=e.selectedId,n=e.data;return Object(P.jsx)(Tt,{selectedId:t,data:n,path:"tenants",itemContent:function(e){return Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsx)(Gt.a,{children:Object(P.jsx)(ue.a,{sx:{marginRight:"1em"},alt:"".concat(e.user.first_name,"  ").concat(e.user.last_name),src:e.user.image_url||H})}),Object(P.jsx)(ft.a,{primary:"".concat(e.user.first_name,"  ").concat(e.user.last_name),secondary:Object(P.jsx)(r.a.Fragment,{children:Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:[e.property.address.street_address," | ",e.unit.name]})})})]})},sortParams:[{label:"name",terms:[function(e){return e.user.first_name}]},{label:"location",terms:[function(e){return e.property.name},function(e){return e.unit.name}]}],searchParms:function(e){return e.name},collapsedText:{primary:function(e){return"".concat(e.user.first_name," ").concat(e.user.last_name)},secondary:function(e){return"".concat(e.unit.name)}},isAdd:!0})}function Jt(){var e=Object(d.i)().id,t=Object(a.useState)(),n=Object(g.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),s=Object(g.a)(i,2),o=s[0],l=s[1],u=Object(d.g)();return Object(a.useEffect)((function(){Be().then((function(e){l(e),console.log(e)}))}),[]),Object(a.useEffect)((function(){!e&&o.length>0?(c(o[0]._id),u.replace("/tenants/".concat(o[0]._id))):e&&o.length>0&&c(e)}),[u,o,c,e]),Object(P.jsx)(xt,{side:Object(P.jsx)(Wt,{selectedId:e,data:o}),view:Object(P.jsx)(Rt,{tenantId:r})})}function Ht(e){var t=e.currentMaintenance;return Object(P.jsx)(r.a.Fragment,{children:Object(P.jsxs)(R.a,{item:!0,container:!0,spacing:3,children:[t.property&&Object(P.jsx)(Z,{property:t.property}),t.tenant&&Object(P.jsx)(zt,{tenant:t.tenant})]})})}function Zt(e){var t=e.maintenanceId,n=(F().loggedInUser,Object(a.useState)()),r=Object(g.a)(n,2),c=r[0],i=r[1],s="add"===t;Object(a.useEffect)((function(){i(null),!s&&t&&function(e){return ct.apply(this,arguments)}(t).then((function(e){i(e)}))}),[t,s]);var o=[{label:"Date",content:function(e){return Object(P.jsx)("span",{children:ze(e.date)})}},{label:"Issue",content:function(e){return Object(P.jsx)("span",{children:e.title})}},{label:"Location",content:function(e){return Object(P.jsx)("span",{children:"common"===e.location?"common":e.tenant&&e.tenant.unit.name})}},{label:"Status",content:function(e){return Object(P.jsx)("span",{children:e.status})}}];return s?Object(P.jsx)(R.a,{container:!0,spacing:3,children:Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(mt,{})})}):Object(P.jsx)(Ve,{data:c,loadingState:function(e){return!e},notFoundState:function(e){return e.message},children:c&&Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(Ht,{currentMaintenance:c}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsxs)(Bt,{label:"Maintenance",data:[c],columns:o,toggleLabel:"edit",toggleContent:Object(P.jsx)(mt,{currentMaintenance:c}),children:[Object(P.jsx)(R.a,{container:!0,spacing:.5,sx:{mt:2},children:c.media&&c.media.map((function(e,t){return Object(P.jsx)(R.a,{item:!0,sx:{mr:1},children:Object(P.jsx)("img",{src:e,alt:c.title,loading:"lazy",style:{width:"200px",height:"200px",objectFit:"cover"}})},t)}))}),Object(P.jsx)(h.a,{variant:"body2",children:c.body})]})})]})})}function Qt(e){var t=e.selectedId,n=e.data;return Object(P.jsx)(Tt,{selectedId:t,data:n,path:"maintenances",itemContent:function(e){return Object(P.jsx)(r.a.Fragment,{children:Object(P.jsx)(ft.a,{primary:e.property.name,secondary:Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:["common"===e.location?"common":e.tenant.unit.name," ","| ",e.title]}),Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:[ze(e.date)," | ",e.status]})]})})})},sortParams:[{label:"date",terms:[function(e){return e.date}]},{label:"location",terms:[function(e){return e.property.name},function(e){return e.tenant.unit.name}]}],searchParms:function(e){return e.name},collapsedText:{primary:function(e){return e.title},secondary:function(e){return"common"===e.location?"common":e.tenant.unit.name}},isAdd:!0})}function Xt(){var e=Object(d.i)().id,t=Object(a.useState)(e),n=Object(g.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),s=Object(g.a)(i,2),o=s[0],l=s[1],u=Object(d.g)();return Object(a.useEffect)((function(){(function(){return rt.apply(this,arguments)})().then((function(e){console.log(e),l(e)}))}),[]),Object(a.useEffect)((function(){!e&&o.length>0?(c(o[0]._id),u.replace("/maintenances/".concat(o[0]._id))):e&&o.length>0&&c(e)}),[u,o,c,e]),Object(P.jsx)(xt,{side:Object(P.jsx)(Qt,{selectedId:e,data:o}),view:Object(P.jsx)(Zt,{maintenanceId:r})})}function Yt(){return(Yt=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/invoice"),t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $t(){return($t=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/invoice/").concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function en(e){var t=e.currentInvoice;return Object(P.jsx)(r.a.Fragment,{children:Object(P.jsxs)(R.a,{item:!0,container:!0,spacing:3,children:[t.property&&Object(P.jsx)(Z,{property:t.property}),t.tenant&&Object(P.jsx)(zt,{tenant:t.tenant})]})})}function tn(e){var t=e.invoiceId,n=Object(a.useState)(),r=Object(g.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)((function(){t&&function(e){return $t.apply(this,arguments)}(t).then((function(e){i(e)}))}),[t]);var s=[{label:"amount",content:function(e){return Object(P.jsx)("span",{children:Q.format(e.amount)})}},{label:"due date",content:function(e){return Object(P.jsx)("span",{children:ze(e.due_date)})}},{label:"paid date ",content:function(e){return Object(P.jsx)("span",{children:ze(e.paid_date)})}}];return Object(P.jsx)(Ve,{data:c,loadingState:function(e){return!e},notFoundState:function(e){return e.message},children:c&&Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(en,{currentInvoice:c}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(Bt,{label:"Invoice",data:[c],columns:s})})]})})}function nn(e){var t=e.selectedId,n=e.data,a={primary:function(e){return"".concat(e.tenant.user.first_name," ").concat(e.tenant.user.last_name)},secondary:function(e){return"".concat(ze(e.due_date))}};return Object(P.jsx)(Tt,{selectedId:t,data:n,path:"invoices",itemContent:function(e){return Object(P.jsx)(r.a.Fragment,{children:Object(P.jsx)(ft.a,{primary:e.property.name,secondary:Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:["".concat(e.tenant.user.first_name," ").concat(e.tenant.user.last_name)," ","|"," ","common"===e.location?"common":e.tenant.unit.name]}),Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:[ze(e.due_date)," |"," ",e.paid_date?"paid":"pending"]})]})})})},sortParams:[{label:"location",terms:[function(e){return e.property.name},function(e){return e.tenant.unit.name}]}],searchParms:function(e){return e.name},collapsedText:a})}function an(){var e=Object(d.i)().id,t=Object(a.useState)(e),n=Object(g.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),s=Object(g.a)(i,2),o=s[0],l=s[1],u=Object(d.g)();return Object(a.useEffect)((function(){(function(){return Yt.apply(this,arguments)})().then((function(e){l(e)}))}),[]),Object(a.useEffect)((function(){!e&&o.length>0?(c(o[0]._id),u.replace("/invoices/".concat(o[0]._id))):e&&o.length>0&&c(e)}),[u,o,c,e]),Object(P.jsx)(xt,{side:Object(P.jsx)(nn,{selectedId:e,data:o}),view:Object(P.jsx)(tn,{invoiceId:r})})}var rn=n(378),cn=n(181),sn=n.n(cn);function on(){var e=Object(d.g)(),t=F().updateLoginContext;var n=Y.c().shape({email:Y.d().email().required("email is required"),password:Y.d().required("password is required")});return Object(P.jsxs)(pt.a,{component:"main",maxWidth:"xs",children:[Object(P.jsx)(rn.a,{}),Object(P.jsxs)(Ce.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(P.jsx)(ue.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(P.jsx)(sn.a,{})}),Object(P.jsx)(h.a,{component:"h1",variant:"h5",children:"Log In"}),Object(P.jsx)(X.b,{enableReinitialize:!0,initialValues:{email:"",password:""},validationSchema:n,onSubmit:function(n,a){var r=a.setSubmitting;console.log(n),v(n.email,n.password).then((function(n){r(!0),n.error?r(!1):n.success?(r(!1),console.log("LOGIN",n),t(n.success),e.push("/dashboard")):(console.error({data:n}),r(!1))}))},children:function(e){var t=e.handleSubmit;e.handleChange,e.values,e.touched,e.errors,e.isSubmitting;return Object(P.jsxs)("form",{onSubmit:t,noValidate:!0,sx:{mt:1},children:[Object(P.jsx)(ae,{label:"Email Address",formikKey:"email",autoComplete:"email",autoFocus:!0}),Object(P.jsx)(ae,{label:"Password",formikKey:"password",type:"password"}),Object(P.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Log In"}),Object(P.jsxs)(R.a,{container:!0,children:[Object(P.jsx)(R.a,{item:!0,xs:!0,children:Object(P.jsx)(j.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(j.a,{component:u.c,to:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})}})]})]})}function ln(){var e=Object(d.g)(),t=F().updateLoginContext,n=function(n,a){v(n,a).then((function(n){n.success&&(t(n.success,!1),e.push("/dashboard"))}))};return Object(P.jsxs)(pt.a,{component:"main",maxWidth:"xs",children:[Object(P.jsx)(on,{}),Object(P.jsxs)(R.a,{container:!0,direction:"column",sx:{mt:2},spacing:2,children:[Object(P.jsx)(p.a,{onClick:function(){return n("owner1@gmail.com","123")},children:"Demo Owner1 Login"}),Object(P.jsx)(p.a,{onClick:function(){return n("owner2@gmail.com","123")},children:"Demo Owner2 Login"}),Object(P.jsx)(p.a,{onClick:function(){return n("tenb1@gmail.com","123")},children:"tenb1 Login"})]})]})}function un(){return(un=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/lease"),t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dn(){return(dn=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",credentials:"include"},e.next=3,fetch("".concat(y,"/lease/").concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jn(e){var t=e.currentLease;return Object(P.jsx)(r.a.Fragment,{children:Object(P.jsxs)(R.a,{item:!0,container:!0,spacing:3,children:[t.property&&Object(P.jsx)(Z,{property:t.property}),t.tenant&&Object(P.jsx)(zt,{tenant:t.tenant})]})})}function bn(e){var t=e.leaseId,n=Object(a.useState)(),r=Object(g.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)((function(){t&&function(e){return dn.apply(this,arguments)}(t).then((function(e){i(e)}))}),[t]);var s=[{label:"monthly rent",content:function(e){return Object(P.jsx)("span",{children:Q.format(e.monthly_rent)})}},{label:"start date",content:function(e){return Object(P.jsx)("span",{children:ze(e.start_date)})}},{label:"end date",content:function(e){return Object(P.jsx)("span",{children:ze(e.end_date)})}}];return Object(P.jsx)(Ve,{data:c,loadingState:function(e){return!e},notFoundState:function(e){return e.message},children:c&&Object(P.jsxs)(R.a,{container:!0,spacing:3,children:[Object(P.jsx)(jn,{currentLease:c}),Object(P.jsx)(R.a,{item:!0,xs:12,children:Object(P.jsx)(Bt,{label:"Lease",data:[c],columns:s})})]})})}function mn(e){var t=e.selectedId,n=e.data,a={primary:function(e){return"".concat(e.tenant.user.first_name," ").concat(e.tenant.user.last_name)},secondary:function(e){return"".concat(ze(e.end_date))}};return Object(P.jsx)(Tt,{selectedId:t,data:n,path:"leases",itemContent:function(e){return Object(P.jsx)(r.a.Fragment,{children:Object(P.jsx)(ft.a,{primary:e.property.name,secondary:Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:["".concat(e.tenant.user.first_name," ").concat(e.tenant.user.last_name)," ","|"," ","common"===e.location?"common":e.tenant.unit.name]}),Object(P.jsxs)(h.a,{sx:{display:"block"},component:"span",variant:"body2",color:"text.primary",children:[Q.format(e.monthly_rent)," |"," ",ze(e.end_date)]})]})})})},sortParams:[{label:"location",terms:[function(e){return e.property.name},function(e){return e.tenant.unit.name}]}],searchParms:function(e){return e.name},collapsedText:a})}function hn(){var e=Object(d.i)().id,t=Object(a.useState)(e),n=Object(g.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),s=Object(g.a)(i,2),o=s[0],l=s[1],u=Object(d.g)();return Object(a.useEffect)((function(){(function(){return un.apply(this,arguments)})().then((function(e){l(e)}))}),[]),Object(a.useEffect)((function(){!e&&o.length>0?(c(o[0]._id),u.replace("/leases/".concat(o[0]._id))):e&&o.length>0&&c(e)}),[u,o,c,e]),Object(P.jsx)(xt,{side:Object(P.jsx)(mn,{selectedId:e,data:o}),view:Object(P.jsx)(bn,{leaseId:r})})}var pn=["Comp","allow"];function xn(e){var t=e.Comp,n=e.allow,a=Object(T.a)(e,pn),r=F().loggedInUser;return Object(P.jsx)(d.b,Object(ee.a)(Object(ee.a)({},a),{},{render:function(e){return void 0===r?Object(P.jsxs)(R.a,{container:!0,children:[Object(P.jsx)(Ce.a,{mt:20}),Object(P.jsx)($.a,{})]}):r&&!n||r&&n&&n.includes(r.account_type)?Object(P.jsx)(t,Object(ee.a)(Object(ee.a)({},a),e)):Object(P.jsx)(d.a,{to:{pathname:"/unauthorized",state:{from:e.location}}})}}))}var fn=["Comp"];function On(e){var t=e.Comp,n=Object(T.a)(e,fn),a=F().loggedInUser;return Object(P.jsx)(d.b,Object(ee.a)(Object(ee.a)({},n),{},{render:function(e){return void 0===a?Object(P.jsxs)(R.a,{container:!0,justify:"center",alignItems:"center",children:[Object(P.jsx)(Ce.a,{mt:20}),Object(P.jsx)($.a,{})]}):Object(P.jsx)(t,Object(ee.a)(Object(ee.a)({},n),e))}}))}function gn(){return Object(P.jsxs)(R.a,{container:!0,component:"main",alignItems:"center",direction:"column",children:[Object(P.jsx)(Ce.a,{mt:5}),Object(P.jsx)(h.a,{variant:"h3",color:"inherit",noWrap:!0,children:"Unauthorized"}),Object(P.jsx)(j.a,{component:u.b,to:"/login",variant:"button",underline:"always",color:"textPrimary",children:"Log In"})]})}function yn(e){var t=e.current,n=e.handleCancel,r=Object(d.g)(),c=ge().updateSnackBarMessage,i=Object(a.useState)(!1),s=Object(g.a)(i,2),o=s[0],l=s[1];return Object(P.jsx)(R.a,{item:!0,children:Object(P.jsx)(Nt,{label:"Owner",current:t,handleSubmit:function(e,n){var a=n.setSubmitting;t?He(t.user._id,t._id,e).then((function(e){a(!0);ye(c,a,e,(function(){return r.go(0)}))})):We(e).then((function(e){ye(c,a,e,(function(){r.push("/dashboard")}))}))},handleDelete:function(){Qe(t._id).then((function(e){ye(c,l,e,(function(){r.push({pathname:"/tenants"})}))}))},handleCancel:n,deleteSubmitting:o,child:function(e,t){return Object(P.jsx)(P.Fragment,{})},childNamespace:"owner",childValidationSchema:{},childInitialValues:{account_type:"owner"}})})}function vn(){return Object(P.jsx)(pt.a,{component:"main",maxWidth:"xs",children:Object(P.jsx)(R.a,{container:!0,direction:"column",sx:{mt:2},spacing:2,children:Object(P.jsx)(yn,{})})})}function _n(){var e=F().loggedInUser;return Object(P.jsx)(pt.a,{component:"main",maxWidth:"xs",children:Object(P.jsx)(R.a,{container:!0,direction:"column",sx:{mt:2},spacing:2,children:Object(P.jsx)(yn,{current:e})})})}var Cn=function(){return Object(P.jsx)(s.a,{theme:l,children:Object(P.jsx)(Oe,{children:Object(P.jsx)(u.a,{children:Object(P.jsxs)(L,{children:[Object(P.jsx)(E,{}),Object(P.jsxs)(d.d,{children:[Object(P.jsx)(d.b,{exact:!0,path:"/",component:ln}),Object(P.jsx)(xn,{exact:!0,path:"/dashboard",Comp:Vt}),Object(P.jsx)(xn,{path:"/properties/:id",Comp:Dt,allow:[U.owner]}),Object(P.jsx)(xn,{exact:!0,path:"/properties",Comp:Dt,allow:[U.owner]}),Object(P.jsx)(xn,{exact:!0,path:"/tenants/:id",Comp:Jt,allow:[U.owner]}),Object(P.jsx)(xn,{exact:!0,path:"/tenants",Comp:Jt,allow:[U.owner]}),Object(P.jsx)(xn,{exact:!0,path:"/maintenances/:id",Comp:Xt}),Object(P.jsx)(xn,{exact:!0,path:"/maintenances",Comp:Xt}),Object(P.jsx)(xn,{exact:!0,path:"/invoices/:id",Comp:an}),Object(P.jsx)(xn,{exact:!0,path:"/invoices",Comp:an}),Object(P.jsx)(xn,{exact:!0,path:"/leases/:id",Comp:hn}),Object(P.jsx)(xn,{exact:!0,path:"/leases",Comp:hn}),Object(P.jsx)(xn,{exact:!0,path:"/profile",Comp:_n}),Object(P.jsx)(On,{exact:!0,path:"/login",Comp:ln}),Object(P.jsx)(d.b,{exact:!0,path:"/signup",component:vn}),Object(P.jsx)(d.b,{exact:!0,path:"/unauthorized",component:gn}),Object(P.jsx)(d.b,{path:"*",children:Object(P.jsx)(d.a,{to:"/"})})]})]})})})})},Sn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,417)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(Cn,{})}),document.getElementById("root")),Sn()}},[[311,1,2]]]);
//# sourceMappingURL=main.5574e5bd.chunk.js.map